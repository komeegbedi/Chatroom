<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Chatroom</title>
    <!-- Google fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700;800&display=swap" rel="stylesheet">

    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">

    <!--My css file-->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <noscript>
        <div id="overlay" style="display: block;">
            <p class="lead text text-center">You would need to enable javascript for this website to function properly</p>
        </div>
    </noscript>

    <!-- Loading screen -->
    <div id="overlay" class="loading-screen">
        <p class="lead text">
            This may take a few minutes to load 
            <img src="./assets/loading.gif" alt="loading gif" height="25px">
        </p>
    </div>

    <!-- login  screen -->
    <div class ="start-scren" id="overlay">
       <div class="container">

            <form action="#">
                <div class="form-group">
                    <label for="exampleFormControlInput1">Username</label>
                    <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="Pick a username" autocomplete="off" required> 
                    <p class="lead output text-danger"></p>
                </div>
            
                <button type="submit" class="btn btn-grad">Get Started! <img src="./assets/loading.gif" alt="loading gif" height="25px"></button>

                <ul>
                    <li>Username can't be changed after registration.</li>
                    <li>Username has to be between 4 to 12 characters.</li>
                    <li>Numbers can't be used alone.</li>
                    <li>No special characters (including emojis)</li>
                </ul>
               
            </form>

       </div>
    </div>

    <!-- chatarea   screen -->
    <main class="grid">   

        <!-- bottom section -->
        <section class="bottom-menu">
        
            <div class="burger-menu">
                <div id="nav-icon3">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        
            <input type="checkbox" id="switch">
            <div class="content">
                <label for="switch">
                    <div class="toggle"></div>
                    <div class="names">
                        <p class="light">Light</p>
                        <p class="dark">Dark</p>
                    </div>
                </label>
            </div>
        
        </section>

        <!-- Interests -->
        <section class="interest">

            <div class="container">
                <h2 class="title text-center">Interests</h2>
            </div>

            <div class="channels">

                <button class="btn col-12 selected" id="general">
                    <img src="./assets/gossip.svg" alt="Gossip Icon">
                    <span class="interest-name">#General</span>
                </button>

                <button class="btn col-12" id="gaming">
                    <img src="./assets/game.svg" alt="Gaming Icon">
                     <span class="interest-name">#Gaming</span>
                </button>
                
                <button class="btn col-12" id="football">
                    <img src="./assets/football.svg" alt="Football Icon">
                    <span class="interest-name">#Football</span>
                </button>

                <button class="btn col-12" id="programming">
                    <img src="./assets/code.svg" alt="Programming icon">
                    <span class="interest-name">#Programming</span> 
                </button>

                <button class="btn col-12" id="work">
                    <img src="./assets/work.svg" alt="Programming icon">
                    <span class="interest-name">#Work</span>
                </button>

            </div>

        </section>

        <!-- Main chatroom-->
        <section class="chat-area grid">

            <div class="container">
                <h2 class="title text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50px" height="50px" class="logo">
                        <path
                            d="M 19 0 C 8.621094 0 0 7.492188 0 16.90625 C 0 21.460938 2.042969 25.589844 5.3125 28.625 C 4.832031 30.042969 3.8125 31.171875 2.71875 32.0625 C 2.109375 32.558594 1.515625 32.984375 1.03125 33.40625 C 0.789063 33.617188 0.566406 33.804688 0.375 34.09375 C 0.183594 34.382813 -0.0078125 34.882813 0.125 35.375 L 0.25 35.75 L 0.59375 35.96875 C 1.632813 36.558594 2.894531 36.65625 4.21875 36.5625 C 5.542969 36.46875 6.972656 36.136719 8.375 35.75 C 10.308594 35.21875 11.964844 34.585938 13.34375 34.03125 C 16.09375 40.390625 22.996094 44.8125 31 44.8125 C 32.386719 44.8125 33.707031 44.59375 34.9375 44.40625 C 36.332031 45.039063 38.828125 46.082031 41.53125 46.8125 C 44.339844 47.574219 47.210938 48.140625 49.28125 46.96875 L 49.65625 46.75 L 49.75 46.375 C 49.882813 45.886719 49.71875 45.417969 49.53125 45.125 C 49.34375 44.832031 49.144531 44.621094 48.90625 44.40625 C 48.429688 43.972656 47.824219 43.535156 47.21875 43.03125 C 46.128906 42.125 45.105469 40.984375 44.59375 39.59375 C 47.851563 36.558594 49.90625 32.449219 49.90625 27.90625 C 49.90625 20.488281 44.5 14.160156 37.09375 11.90625 C 34.707031 4.96875 27.457031 0 19 0 Z M 19 2 C 28.421875 2 35.90625 8.710938 35.90625 16.90625 C 35.90625 25.09375 28.328125 31.8125 18.90625 31.8125 C 17.554688 31.8125 16.226563 31.714844 15.03125 31.4375 L 14.71875 31.34375 L 14.40625 31.46875 C 14.289063 31.519531 14.042969 31.628906 13.90625 31.6875 C 13.882813 31.695313 13.835938 31.679688 13.8125 31.6875 C 13.578125 31.703125 13.355469 31.804688 13.1875 31.96875 C 11.773438 32.550781 9.910156 33.277344 7.84375 33.84375 C 6.519531 34.207031 5.183594 34.480469 4.0625 34.5625 C 3.566406 34.597656 3.359375 34.449219 2.96875 34.40625 C 3.289063 34.15625 3.558594 33.957031 3.96875 33.625 C 5.300781 32.539063 6.941406 30.96875 7.46875 28.625 L 7.59375 28.03125 L 7.15625 27.625 C 3.957031 24.894531 2 21.09375 2 16.90625 C 2 8.71875 9.578125 2 19 2 Z M 37.65625 14.1875 C 37.84375 14.257813 38.035156 14.328125 38.21875 14.40625 C 38.089844 14.574219 38 14.773438 38 15 C 38 15.550781 38.449219 16 39 16 C 39.460938 16 39.820313 15.671875 39.9375 15.25 C 42.15625 16.476563 44.007813 18.136719 45.375 20.09375 C 45.253906 20.042969 45.136719 20 45 20 C 44.449219 20 44 20.449219 44 21 C 44 21.550781 44.449219 22 45 22 C 45.53125 22 45.964844 21.585938 46 21.0625 C 46.460938 21.84375 46.859375 22.679688 47.15625 23.53125 C 47.074219 23.675781 47 23.824219 47 24 C 47 24.375 47.226563 24.671875 47.53125 24.84375 C 47.769531 25.835938 47.90625 26.855469 47.90625 27.90625 C 47.90625 28.28125 47.875 28.660156 47.84375 29.03125 C 47.371094 29.109375 47 29.503906 47 30 C 47 30.390625 47.238281 30.710938 47.5625 30.875 C 46.875 33.875 45.175781 36.558594 42.75 38.625 L 42.28125 39.03125 L 42.4375 39.65625 C 42.945313 41.632813 44.191406 43.039063 45.375 44.09375 C 45.253906 44.042969 45.136719 44 45 44 C 44.449219 44 44 44.449219 44 45 C 44 45.101563 44.035156 45.1875 44.0625 45.28125 C 43.425781 45.195313 42.769531 45.066406 42.0625 44.875 C 39.921875 44.296875 37.835938 43.472656 36.4375 42.875 C 36.761719 42.710938 37 42.390625 37 42 C 37 41.449219 36.550781 41 36 41 C 35.449219 41 35 41.449219 35 42 C 35 42.136719 35.042969 42.253906 35.09375 42.375 L 34.9375 42.40625 C 33.644531 42.605469 32.304688 42.8125 31 42.8125 C 30.855469 42.8125 30.707031 42.816406 30.5625 42.8125 C 30.820313 42.632813 31 42.339844 31 42 C 31 41.449219 30.550781 41 30 41 C 29.449219 41 29 41.449219 29 42 C 29 42.277344 29.101563 42.539063 29.28125 42.71875 C 27.777344 42.585938 26.328125 42.296875 24.96875 41.84375 C 24.890625 41.371094 24.496094 41 24 41 C 23.761719 41 23.546875 41.082031 23.375 41.21875 C 22.5625 40.859375 21.792969 40.464844 21.0625 40 C 21.585938 39.964844 22 39.53125 22 39 C 22 38.449219 21.550781 38 21 38 C 20.449219 38 20 38.449219 20 39 C 20 39.113281 20.027344 39.210938 20.0625 39.3125 C 19.046875 38.558594 18.132813 37.6875 17.34375 36.75 C 17.519531 36.902344 17.75 37 18 37 C 18.550781 37 19 36.550781 19 36 C 19 35.449219 18.550781 35 18 35 C 17.449219 35 17 35.449219 17 36 C 17 36.226563 17.089844 36.425781 17.21875 36.59375 C 16.523438 35.742188 15.914063 34.84375 15.4375 33.875 C 15.59375 33.796875 15.71875 33.675781 15.8125 33.53125 C 16.835938 33.691406 17.875 33.8125 18.90625 33.8125 C 19.375 33.8125 19.851563 33.78125 20.3125 33.75 C 20.492188 33.914063 20.738281 34 21 34 C 21.324219 34 21.597656 33.835938 21.78125 33.59375 C 23.304688 33.386719 24.769531 33.042969 26.15625 32.53125 C 26.074219 32.675781 26 32.824219 26 33 C 26 33.550781 26.449219 34 27 34 C 27.550781 34 28 33.550781 28 33 C 28 32.539063 27.671875 32.179688 27.25 32.0625 C 28.050781 31.710938 28.828125 31.320313 29.5625 30.875 C 29.699219 30.945313 29.835938 31 30 31 C 30.550781 31 31 30.550781 31 30 C 31 29.976563 30.96875 29.960938 30.96875 29.9375 C 31.796875 29.328125 32.578125 28.660156 33.28125 27.9375 C 33.625 27.832031 33.863281 27.542969 33.9375 27.1875 C 34.566406 26.464844 35.164063 25.71875 35.65625 24.90625 C 35.769531 24.949219 35.871094 25 36 25 C 36.550781 25 37 24.550781 37 24 C 37 23.648438 36.804688 23.367188 36.53125 23.1875 C 37.40625 21.25 37.90625 19.132813 37.90625 16.90625 C 37.90625 15.980469 37.816406 15.070313 37.65625 14.1875 Z M 42 17 C 41.449219 17 41 17.449219 41 18 C 41 18.550781 41.449219 19 42 19 C 42.550781 19 43 18.550781 43 18 C 43 17.449219 42.550781 17 42 17 Z M 39 20 C 38.449219 20 38 20.449219 38 21 C 38 21.550781 38.449219 22 39 22 C 39.550781 22 40 21.550781 40 21 C 40 20.449219 39.550781 20 39 20 Z M 42 23 C 41.449219 23 41 23.449219 41 24 C 41 24.550781 41.449219 25 42 25 C 42.550781 25 43 24.550781 43 24 C 43 23.449219 42.550781 23 42 23 Z M 39 26 C 38.449219 26 38 26.449219 38 27 C 38 27.550781 38.449219 28 39 28 C 39.550781 28 40 27.550781 40 27 C 40 26.449219 39.550781 26 39 26 Z M 45 26 C 44.449219 26 44 26.449219 44 27 C 44 27.550781 44.449219 28 45 28 C 45.550781 28 46 27.550781 46 27 C 46 26.449219 45.550781 26 45 26 Z M 36 29 C 35.449219 29 35 29.449219 35 30 C 35 30.550781 35.449219 31 36 31 C 36.550781 31 37 30.550781 37 30 C 37 29.449219 36.550781 29 36 29 Z M 42 29 C 41.449219 29 41 29.449219 41 30 C 41 30.550781 41.449219 31 42 31 C 42.550781 31 43 30.550781 43 30 C 43 29.449219 42.550781 29 42 29 Z M 33 32 C 32.449219 32 32 32.449219 32 33 C 32 33.550781 32.449219 34 33 34 C 33.550781 34 34 33.550781 34 33 C 34 32.449219 33.550781 32 33 32 Z M 39 32 C 38.449219 32 38 32.449219 38 33 C 38 33.550781 38.449219 34 39 34 C 39.550781 34 40 33.550781 40 33 C 40 32.449219 39.550781 32 39 32 Z M 45 32 C 44.449219 32 44 32.449219 44 33 C 44 33.550781 44.449219 34 45 34 C 45.550781 34 46 33.550781 46 33 C 46 32.449219 45.550781 32 45 32 Z M 24 35 C 23.449219 35 23 35.449219 23 36 C 23 36.550781 23.449219 37 24 37 C 24.550781 37 25 36.550781 25 36 C 25 35.449219 24.550781 35 24 35 Z M 30 35 C 29.449219 35 29 35.449219 29 36 C 29 36.550781 29.449219 37 30 37 C 30.550781 37 31 36.550781 31 36 C 31 35.449219 30.550781 35 30 35 Z M 36 35 C 35.449219 35 35 35.449219 35 36 C 35 36.550781 35.449219 37 36 37 C 36.550781 37 37 36.550781 37 36 C 37 35.449219 36.550781 35 36 35 Z M 42 35 C 41.449219 35 41 35.449219 41 36 C 41 36.550781 41.449219 37 42 37 C 42.550781 37 43 36.550781 43 36 C 43 35.449219 42.550781 35 42 35 Z M 27 38 C 26.449219 38 26 38.449219 26 39 C 26 39.550781 26.449219 40 27 40 C 27.550781 40 28 39.550781 28 39 C 28 38.449219 27.550781 38 27 38 Z M 33 38 C 32.449219 38 32 38.449219 32 39 C 32 39.550781 32.449219 40 33 40 C 33.550781 40 34 39.550781 34 39 C 34 38.449219 33.550781 38 33 38 Z M 39 38 C 38.449219 38 38 38.449219 38 39 C 38 39.550781 38.449219 40 39 40 C 39.550781 40 40 39.550781 40 39 C 40 38.449219 39.550781 38 39 38 Z M 42 41 C 41.449219 41 41 41.449219 41 42 C 41 42.550781 41.449219 43 42 43 C 42.550781 43 43 42.550781 43 42 C 43 41.449219 42.550781 41 42 41 Z M 45.8125 44.4375 C 45.855469 44.472656 45.894531 44.527344 45.9375 44.5625 C 46.351563 44.90625 46.648438 45.117188 46.96875 45.375 C 46.632813 45.40625 46.265625 45.410156 45.875 45.40625 C 45.9375 45.277344 46 45.152344 46 45 C 46 44.789063 45.925781 44.597656 45.8125 44.4375 Z">
                        </path>
                    </svg>
                    Chat Room <span class="room-name">(#General)</span>
                </h2>
            </div>
            
            <div class="container">
              
               <div class="main-chat-area grid">

                    <div id="overlay">
                        <img src="./assets/loading.gif" alt="loading gif">
                    </div>

                    <div class="main-chat-text"></div>

                    <div class="chat-box">
                       <p class="lead" id="typing"></p>
                        <form action="#">
                            <textarea name="textBox" spellcheck="true" autocapitalize="off" autocomplete="off"></textarea>
                            <button type="submit" class="btn btn-primary" disabled><img src="./assets/sent.svg" alt="send icon"></button>
                        </form>
                    </div>
               </div>

            </div>

        </section>
    </main>

    <!-- Modal(for deeleting messages) -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Delete Message</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this message? This action cannot be undone.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="close">Close</button>
                    <button type="button" class="btn btn-danger" id="delete">Understood</button>
                </div>
            </div>
        </div>
    </div>

  
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/date-fns/1.9.0/date_fns.min.js"
        integrity="sha512-ToehgZGJmTS39fU8sfP9/f0h2Zo6OeXXKgpdEgzqUtPfE5By1K/ZkD8Jtp5PlfdaWfGVx+Jw5j10h63wSwM1HA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
     <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-analytics.js"></script>

    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyAUljHwSoLDXFItA4V9CwvzhWjHkDh1D1I",
            authDomain: "chatroom-8da7d.firebaseapp.com",
            projectId: "chatroom-8da7d",
            storageBucket: "chatroom-8da7d.appspot.com",
            messagingSenderId: "555515065937",
            appId: "1:555515065937:web:b6b53e9a26954976b0ea70",
            measurementId: "G-CD1L86JZVY"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const analytics = firebase.analytics();
        const db = firebase.firestore();
    </script>
    
    <script src="./../Business/app.js"></script>
    <script src="./../Persistence/chat.js"></script>
    <script src="./../Business/chatUI.js"></script>
    <script src="./../Persistence/login.js"></script>

</body>
</html>